# 大纲
- 移动终端系统与传统PC权限管理需求的区别。
- Android Permission机制与Linux UGO访问控制的区别与联系。
- Android Permission机制实现的基本组件和流程。
- PMI（Privilege Management Infrastructure，权限管理基础设施）中SOA、AA等实体的作用
- 基于属性的访问控制与PMI的关系。
# IPSEC
# 移动终端系统与传统PC权限管理需求的区别
- 传统PC强调“作为一个完整系统独立提供服务”的能力
- 移动终端系统中各个APP需要作为权限管理的基本粒度
- 不同APP之间需要能够进行有效隔离
- APP作为系统资源访问控制的基本单位
- 系统对不同用户的区分不再明显
`重要：`
1. 用户区分标识（UID）不再是移动终端系统进 行资源访问控制的合适依据。
2. 像传统PC区分用户那样，智能终端系统需 要能够区分不同的应用，各个APP需要作为权限管理的基 本粒度。即：APP作为系统资源访问控制的基本单位
# Android Permission机制实现的基本组件和流程
- android原生的代码签名机制：若代码拥有正确的签名则允许其访问系统资源（访问许可为：被安装），若签名不正确，访问被拒绝。
- 代码签名机制只能限制拥有正确签名的代码在系统安装
- 代码签名机制不对代码的运行过程进行控制
- `Android Permission机制本质上是代码签名机制后，对APP权限的进一步访问控制`
## 架构：
![[Pasted image 20240103110042.png]]
## 授权的申请与生成
- APP开发者在Manifest.xml文件中使用uses-permission标签声明Permission 请求
- 安装时首先解析出permission，显示给用户
- 在用户确认后，将APP在Mainfest.xml中的Permission申请信息保存进系统的package.xml文件
- 安装完成后，APP Permission授权信息完成了在系统中的注册
## 授权的形成
- APP的实际Permission授权在APP运行加载时从静态存储被加载到APP的进程空间
- 系统启动时，所有APP的permission授权被保存在System Server进程
## 权限检查
- APP访问系统资源时，Android系统会检查APP的权限信息
- APP通过API调用系统资源，在API调用时检查权限，
	调用System Server提供的PermCheck功能

`APP可以直接访问Linux内核提供的系统调用Android框架本质上是Linux 内核上的一组应程序进程System Server与用户进程一样，同属Linux用户态APP,与System Server进程及其它包含系统API的进程并列.因此可以绕过API直接访问Linux内核获取系统资源`
# Android Permission机制与Linux UGO访问控制

- UGO提供了三种基本的授权  
	- Android Permission机制大约提供了1百多个Permission授权信息
- UGO基于身份的DAC；Android Permission基于能力
- UGO更底层
# PKI
[5分钟让你知道什么是PKI - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/30136885)
# PMI
- SOA (Source of Authority)是资源拥有者，它可以签署一个文件，称某实体可以通 过某种特定的方式使用某种资源，而这个被授权的实体称为Privilege Holder
- Privilege Holder：当Privilege Holder不能将它获得的权限进一步委托给其他实体，此时该实体只是Privilege Holder
- Attribute Authority (AA)：当Privilege Holder可以将它获得的权限进一步委托给其他实体，此时Privilege Holder就变为了AA。AA不能授予其他实体比他本身权限更大的权限
- 权限验证者（verifier）：当privilege holder声称（assert）他具有某种特 权的时候，privilege verifier要验证这项权限是否 真的属于他
# 基于属性的访问控制与PMI的关系
访问控制技术是其他安全构建时的基础和信任来源